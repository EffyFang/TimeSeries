"0","extract_ts <- function(rownr){"
"0","  tdates %>%"
"0","    filter_((interp(~x == row_number(), .values = list(x = rownr)))) %>%"
"0","    rownames_to_column %>% "
"0","    gather(dates, value, -rowname) %>% "
"0","    spread(rowname, value) %>%"
"0","    mutate(dates = ymd(dates),"
"0","          views = as.integer(`1`)) %>%"
"0","    select(-`1`)"
"0","}"
"0","extract_ts_nrm <- function(rownr){"
"0","  tdates %>%"
"0","    filter_((interp(~x == row_number(), .values = list(x = rownr)))) %>%"
"0","    rownames_to_column %>% "
"0","    gather(dates, value, -rowname) %>% "
"0","    spread(rowname, value) %>%"
"0","    mutate(dates = ymd(dates),"
"0","          views = as.integer(`1`)) %>%"
"0","    select(-`1`) %>%"
"0","    mutate(views = views/mean(views))"
"0","}"
